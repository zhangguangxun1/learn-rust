# Btrfs

Btrfs (Better FS / Butter FS) 是一款现代的 写时复制 (CoW - Copy on Write) 文件系统

在 2026 年的 Linux 世界中，它已成为继 Ext4 之后的绝对主流，特别是对于 Arch Linux 和 Fedora 用户来说，它是实现“系统不废”的核心技术

在 Btrfs 文件系统下，你不需要像传统 Ext4 那样在分区表（fdisk/cfdisk）里给 /home 单独划分一个固定大小的分区（如 200G）

这就是 Btrfs “子卷 (Subvolume)” 架构的魅力所在

## 1. 为什么不用单独分区？

空间共享： 子卷 @（系统）和 @home（用户数据）共用这 1T 硬盘的全部空间。如果你系统只占 20G，剩下的 980G /home 都能用；反之亦然

动态调整： 你不需要担心“当初给根目录分少了”或者“给 home 分多了”的问题，它们之间没有物理边界

## 2. 子卷（Subvolume）vs 物理分区（Partition）

你可以把 Btrfs 想象成一个大水池：

物理分区就像是在水池中间砌了一堵死墙，左边水满了右边也帮不上忙

子卷就像是在水池里放了几个透明的隔断桶，虽然看起来是分开的，但底部的空间（存储块）是完全打通的

## 3. 如何在不分区的情况下实现“重装系统保留数据”？

正如我上一个回答所说，重装时：

你只是删除了名为 @ 的子卷（相当于倒掉了系统那个桶里的水）

你保留了名为 @home 的子卷（用户桶里的水还在）

重装后，把新的系统数据装进新的 @ 子卷，然后把旧的 @home 重新挂载回来

## 4. 2026 年的最佳实践建议

既然你使用的是 1T 的西部数据 SSD，采用 “单分区 + 多子卷” 是性能和灵活性最高的方案

你的磁盘结构应该是这样的：

物理层 (nvme0n1p2): 整个 1T 的 Btrfs 分区

逻辑层 (Subvolumes):

@ -> 挂载到 /

@home -> 挂载到 /home

@log -> 挂载到 /var/log

@pkg -> 挂载到 /var/cache/pacman/pkg

@snapshots -> 挂载到 /.snapshots

总结：

不要去分 /dev/nvme0n1p3、p4 这样的物理分区。全硬盘只分一个 EFI 分区和一个 Btrfs 大分区，剩下的所有隔离需求全部交给子卷去完成

这才是现代 Arch Linux 安装的“高级感”
